<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ants.dao.ClassifyDao">
    <!--获取首页大分类的数据信息，无“其他”大分类-->
    <select id="parentClassification" resultType="com.ants.entity.ParentClass">
        select * from ants_class_parent where parentName != "其他"
    </select>

    <!--获取首页大分类的数据信息-->
    <select id="parentClassificationHasOthers" resultType="com.ants.entity.ParentClass">
        select * from ants_class_parent
    </select>

    <!--获取所有大分类的ID-->
    <select id="parentClassId" resultType="Integer">
        select parentId from ants_class_parent
    </select>

    <!--获取单个大分类的小分类的数据信息-->
    <select id="childClassification" resultType="String" parameterType="Integer">
        select subClassName from ants_class_sub where parentClass = #{parentClass}
    </select>

    <!--获取所有小分类的名称-->
    <select id="allChildClassification" resultType="com.ants.entity.ChildClass">
        select subClassName from ants_class_sub where subClassName != "其他"
    </select>

    <!--根据大分类的ID获取属于此大分类的商品的信息-->
    <select id="chooseGoodsByParent" resultType="com.ants.entity.Goods" parameterType="Integer">
        select * from ants_goods_base where goodsClass in(
              select subClassId from ants_class_sub where parentClass = #{parentId})
    </select>

    <!--根据大分类的ID获取属于此大分类的所有商品的总数量-->
    <select id="getGoodsByParentNumbers" resultType="Integer" parameterType="Integer">
        select count(*) from `ants_goods_base` where goodsClass in(
           select subClassId from `ants_class_sub` where parentClass = #{parentId})
    </select>

    <!--根据前端传来的ID获取此ID代表的大分类的名称-->
    <select id="getParentName" resultType="String" parameterType="Integer">
        select parentName from `ants_class_parent` where parentId = #{parentId}
    </select>

    <!--根据前端传来的ID获取此ID代表的小分类的名称-->
    <select id="getChildName" resultType="String" parameterType="Integer">
        select subClassName from `ants_class_sub` where subClassId = #{childId}
    </select>

    <!--根据前端传来的子类的ID获取父类的名称-->
    <select id="getParentNameByChildId" resultType="String" parameterType="Integer">
        select parentName from `ants_class_parent` where parentId =
        (select parentClass from `ants_class_sub` where subClassId = #{childId} )
    </select>

    <!--根据前端传来的子类ID获取相应的商品数据-->
    <select id="chooseGoodsByChild" resultType="com.ants.entity.Goods" parameterType="Integer">
        select * from `ants_goods_base` where goodsClass = #{childId}
    </select>

    <!--根据小分类的ID获取属于此小分类的所有商品的总数量-->
    <select id="getGoodsByChildNumbers" resultType="Integer" parameterType="Integer">
        select count(*) from `ants_goods_base` where goodsClass = #{childId}
    </select>
</mapper>