{"remainingRequest":"C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\src\\store\\modules\\chat.js","dependencies":[{"path":"C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\src\\store\\modules\\chat.js","mtime":1568516704900},{"path":"C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["var namespaced = true;\nvar state = {\n  ws: \"\",\n  url: \"ws://127.0.0.1:8080/chat?\",\n  userList: [{\n    contactor: 1,\n    imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\n    contactorName: 'abc',\n    chatTime: '2019/8/10'\n  }, {\n    contactor: 2,\n    imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\n    contactorName: '111',\n    chatTime: '2019/7/10'\n  }, {\n    contactor: 3,\n    imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\n    contactorName: '222',\n    chatTime: '2019/6/20'\n  }, {\n    contactor: 4,\n    imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\n    contactorName: '333',\n    chatTime: '2019/5/10'\n  }],\n  chooseUser: {\n    contactor: 1,\n    imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\n    contactorName: 'abc',\n    chatTime: '2019/8/10'\n  },\n  newsList: [{\n    identify: false,\n    content: '如果没记错的话应该是在体育中心总店买的吧,才用了几次'\n  }, {\n    identify: true,\n    content: '请问怎么议价，能不能再便宜一点呢~'\n  }, {\n    identify: false,\n    content: '不可以'\n  }, {\n    identify: false,\n    content: '好吧，可以再少一点。'\n  }]\n};\nvar getters = {\n  getUserList: function getUserList(state) {\n    return state.userList;\n  },\n  getChooseUser: function getChooseUser(state) {\n    return state.chooseUser;\n  },\n  getNewsList: function getNewsList(state) {\n    return state.newsList;\n  }\n};\nvar mutations = {\n  chooseChange: function chooseChange(state, user) {\n    state.chooseUser = user;\n  }\n};\nvar actions = {\n  // 选择另一个用户\n  chooseChange: function chooseChange(_ref, user) {\n    var commit = _ref.commit;\n    commit(\"chooseChange\", user);\n  },\n  // websocket连接\n  socketInit: function socketInit(_ref2, _ref3) {\n    var state = _ref2.state;\n    var id = _ref3.id,\n        business = _ref3.business;\n    var url = \"\";\n\n    if (!business) {\n      url = \"\".concat(state.url, \"id=\").concat(id, \"&business=\").concat(business);\n    } else {\n      url = \"\".concat(state.url, \"id=\").concat(id);\n    }\n\n    if ('WebSocket' in window) {\n      state.ws = new WebSocket(url);\n    } else if ('MozWebSocket' in window) {\n      state.ws = new MozWebSocket(url);\n    } else {\n      alert('WebSocket is not supported by this browser.');\n      return;\n    }\n  },\n  // 连接后获取数据\n  onMessage: function onMessage(_ref4) {\n    var state = _ref4.state;\n\n    state.ws.onMessage = function (event) {\n      console.log(\"event:\", event);\n\n      if (event.data.type == 5) {\n        state.userList = event.data.contactorlist;\n      }\n    };\n  },\n  // 连接后发送数据\n  onSend: function onSend(data, file) {\n    // 发送文本信息\n    if (data.type === 1) {\n      state.wx.send(data);\n    } // 发送文件\n\n\n    if (data.type === 2) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function (e) {\n        var blob = e.target.result;\n        var fileFinish = {\n          type: 3,\n          id: data.id,\n          business: data.business\n        }; // 提示后端文件发送完毕\n\n        state.wx.send(blob);\n        state.wx.send(fileFinish);\n      };\n    }\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions,\n  namespaced: namespaced\n};",{"version":3,"sources":["C:\\Users\\123\\Desktop\\大创\\reldomo\\ants\\src\\main\\src\\store\\modules\\chat.js"],"names":["namespaced","state","ws","url","userList","contactor","imgSrc","require","contactorName","chatTime","chooseUser","newsList","identify","content","getters","getUserList","getChooseUser","getNewsList","mutations","chooseChange","user","actions","commit","socketInit","id","business","window","WebSocket","MozWebSocket","alert","onMessage","event","console","log","data","type","contactorlist","onSend","file","wx","send","reader","FileReader","readAsArrayBuffer","onload","e","blob","target","result","fileFinish"],"mappings":"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","sourcesContent":["const namespaced = true;\r\nconst state = {\r\n    ws: \"\",\r\n    url: \"ws://127.0.0.1:8080/chat?\",\r\n    userList: [{\r\n        contactor: 1,\r\n        imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\r\n        contactorName: 'abc',\r\n        chatTime: '2019/8/10'\r\n    }, {\r\n        contactor: 2,\r\n        imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\r\n        contactorName: '111',\r\n        chatTime: '2019/7/10'\r\n    }, {\r\n        contactor: 3,\r\n        imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\r\n        contactorName: '222',\r\n        chatTime: '2019/6/20'\r\n    }, {\r\n        contactor: 4,\r\n        imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\r\n        contactorName: '333',\r\n        chatTime: '2019/5/10'\r\n    }],\r\n    chooseUser: {\r\n        contactor: 1,\r\n        imgSrc: require(\"../../assets/img/index/antsLogo.png\"),\r\n        contactorName: 'abc',\r\n        chatTime: '2019/8/10'\r\n    },\r\n    newsList: [{\r\n        identify: false,\r\n        content: '如果没记错的话应该是在体育中心总店买的吧,才用了几次'\r\n    }, {\r\n        identify: true,\r\n        content: '请问怎么议价，能不能再便宜一点呢~'\r\n    }, {\r\n        identify: false,\r\n        content: '不可以'\r\n    }, {\r\n        identify: false,\r\n        content: '好吧，可以再少一点。'\r\n    }, ]\r\n}\r\nconst getters = {\r\n    getUserList(state) {\r\n        return state.userList\r\n    },\r\n    getChooseUser(state) {\r\n        return state.chooseUser\r\n    },\r\n    getNewsList(state) {\r\n        return state.newsList\r\n    }\r\n}\r\nconst mutations = {\r\n    chooseChange(state, user) {\r\n        state.chooseUser = user;\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    // 选择另一个用户\r\n    chooseChange({ commit }, user) {\r\n        commit(\"chooseChange\", user)\r\n    },\r\n    // websocket连接\r\n    socketInit({ state }, { id, business }) {\r\n        let url = \"\";\r\n        if (!business) {\r\n            url = `${state.url}id=${id}&business=${business}`;\r\n        } else {\r\n            url = `${state.url}id=${id}`;\r\n        }\r\n        if ('WebSocket' in window) {\r\n            state.ws = new WebSocket(url);\r\n        } else if ('MozWebSocket' in window) {\r\n            state.ws = new MozWebSocket(url);\r\n        } else {\r\n            alert('WebSocket is not supported by this browser.');\r\n            return;\r\n        }\r\n    },\r\n    // 连接后获取数据\r\n    onMessage({ state }) {\r\n        state.ws.onMessage = function(event) {\r\n            console.log(\"event:\", event);\r\n            if (event.data.type == 5) {\r\n                state.userList = event.data.contactorlist;\r\n            }\r\n        }\r\n    },\r\n    // 连接后发送数据\r\n    onSend(data, file) {\r\n        // 发送文本信息\r\n        if (data.type === 1) {\r\n            state.wx.send(data)\r\n        }\r\n        // 发送文件\r\n        if (data.type === 2) {\r\n            let reader = new FileReader();\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = function(e) {\r\n                let blob = e.target.result\r\n                let fileFinish = {\r\n                    type: 3,\r\n                    id: data.id,\r\n                    business: data.business\r\n                };\r\n                // 提示后端文件发送完毕\r\n                state.wx.send(blob)\r\n                state.wx.send(fileFinish)\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nexport default { state, getters, mutations, actions, namespaced }"]}]}