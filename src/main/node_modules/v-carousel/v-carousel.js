(function ($) {
    // default values
    var defaults = {left: '#arrow-left', right: '#arrow-right', width:'400', height:'600', css:false, img:'img'};


    $.fn.carousel = function (params) {

        var options = $.extend({}, defaults, options, params);

        this.addClass('v-carousel');
        var currentImg = 0;
        var leftUIEl = $(options.left);
        var rightUIEl = $(options.right);
        var elementsList = $(this.find('ul'));
        var elementsImg = $(this.find(options.img));
        var elLI = this.find('ul li');
        
        if (!options.css) {
            elLI.width(options.width).height(options.height);
            this.width(options.width).height(options.height);
            elementsImg.width(options.width).height(options.height);
        }

        var elementsCount = elementsList.find('li').length;

        leftUIEl.click(function () {

            if (currentImg>0) {
                currentImg--;
                var pixelsOffset = elementsImg.width() + parseInt(elLI.css('margin-right'));

                var currentLeftValue =- pixelsOffset * currentImg;
                elementsList.animate({left: currentLeftValue + "px"}, 500);
            }
        });

        rightUIEl.click(function () {
            if (currentImg<elementsCount-1) {
                currentImg++;
                var pixelsOffset = elementsImg.width()  + parseInt(elLI.css('margin-right'));

                var currentLeftValue = -pixelsOffset * currentImg;
                elementsList.animate({left: currentLeftValue + "px"}, 500);
            }
        });

        return this;
    }

}(jQuery));